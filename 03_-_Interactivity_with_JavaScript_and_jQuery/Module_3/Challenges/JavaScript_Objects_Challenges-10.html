<!-- Created on 9/21/23 by ArchILLtect for the Coursera program "Javascript for Beginners Specialization" - Course 2 - "Animation with JavaScript and JQuery" -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Challenge 10</title>
</head>
<body>
    <h1>Challenge 10</h1>

    <form id ="addPet">
        <p><label>Name <input type="text" id="name" required></label></p>
        <p><label>Species <input type="text" id="species" required></label></p>
        <p><label>Greeting <input type="text" id="greeting" required></label></p>
        <p><input type="submit" value="Add Pet"></label></p>
    </form>

    <div></div>

    <script>

        let petForm = document.getElementById('addPet');
        let formOutput = document.querySelector('div');
        let petCounter = 0;

        petForm.addEventListener('submit', function(event) {
            event.preventDefault();

            let formData = event.target.elements;
            
            petCounter++;

            function Pet() {
                this.name = formData[0].value;
                this.species = formData[1].value;
                this.greeting = function() { alert( formData[2].value ) }
            };
            
            function PrintPet() {
                let addPetInfo = document.createElement('p');
                let addPetGreeting = document.createElement('Button');
                addPetInfo.textContent = `I have a pet ${myPet.species} name ${myPet.name}. Click button below for it's greeting:`
                addPetGreeting.textContent = `Greeting`
                formOutput.appendChild(addPetInfo);
                formOutput.appendChild(addPetGreeting);

                addPetGreeting.addEventListener('click', function() {
                    myPet.greeting();
                });
            };

            let myPet = new Pet;

            if ( petCounter > 1 ) {
                let addPetInfo = document.querySelector('div p');
                let addPetGreeting = document.querySelector('div button')
                addPetInfo.remove();
                addPetGreeting.remove();

                PrintPet();
            } else {
                PrintPet();
            };
        });

    </script>
</body>
</html>